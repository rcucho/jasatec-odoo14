<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
	<record id="view_project_task_technical" model="ir.ui.view">
		<field name="name">project.task.technical</field>
		<field name="model">project.task</field>
		<field name="inherit_id" ref="project.view_task_form2"/>
		<field name="arch" type="xml">
			<data>
				<xpath expr="//page[@name='description_page']" position="attributes">
    					<attribute name="string">Desarrollo</attribute>
				</xpath>
				<xpath expr="//field[@name='sale_line_id']" position="after">
					<field name='state_payment_invoice' widget="badge" decoration-success="state_payment_invoice == 'paid'" decoration-info="state_payment_invoice == 'partial' or state_payment_invoice == 'in_payment'"/>
				</xpath>
				<xpath expr="//notebook" position="inside">
					<page name="herramientas_transfe" string="Herramientas">
						<div class="text-center">
							<div class="col h5">
								<label for='task_picking' string="Movimiento Interno de Herramientas" style="font-weight:bold;"/>
								<field name="task_picking">
									<tree editable="button" multi_edit="1" sample="1">
										<field name="name" decoration-bf="1"/>
										<field name="picking_type_id" optional="show"/>
										<field name="user_id" optional="hide" widget="many2one_avatar_user"/>
										<field name="partner_id" optional="show"/>
										<field name="company_id" optional="hide"/>
										<field name="location_id" string="Desde" optional="show"/>
										<field name="location_dest_id" string="Para" optional="show"/>
										<field name="state" optional="show" widget="badge" decoration-success="state == 'done'" decoration-info="state not in ('done', 'cancel')"/>
										<button name="action_confirm" type="object" string="Marcar Hecho"/>
									</tree>
									<form string="Transferencia Interna de Herramientas ">
										<field name="is_locked" invisible="1"/>
										<field name="show_mark_as_todo" invisible="1"/>
										<field name="show_check_availability" invisible="1"/>
										<field name="show_validate" invisible="1"/>
										<field name="show_lots_text" invisible="1"/>
										<field name="immediate_transfer" invisible="1"/>
										<field name="picking_type_code" invisible="1"/>
										<field name="hide_picking_type" invisible="1"/>
										<field name="show_operations" invisible="1" readonly="1"/>
										<field name="show_reserved" invisible="1" readonly="1"/>
										<field name="move_line_exist" invisible="1"/>
										<field name="has_packages" invisible="1"/>
										<field name="picking_type_entire_packs" invisible="1"/>
										<field name="use_create_lots" invisible="1"/>
										<header>
											  <button name="action_confirm" attrs="{'invisible': [('show_mark_as_todo', '=', False)]}" string="Mark as Todo" type="object" class="oe_highlight" groups="base.group_user"/>
											  <button name="action_assign" attrs="{'invisible': [('show_check_availability', '=', False)]}" string="Check Availability" type="object" class="oe_highlight" groups="base.group_user"/>
											  <button name="button_validate" attrs="{'invisible': ['|', ('state', 'in', ('waiting','confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" class="oe_highlight" groups="stock.group_stock_user"/>
											  <button name="button_validate" attrs="{'invisible': ['|', ('state', 'not in', ('waiting', 'confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" groups="stock.group_stock_user" class="o_btn_validate"/>
											  <widget name="signature" string="Sign" highlight="1" attrs="{'invisible': ['|', '|', ('id', '=', False), ('picking_type_code', '!=', 'outgoing'), ('state', '!=', 'done')]}" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>
											  <widget name="signature" string="Sign" attrs="{'invisible': ['|', '|', ('id', '=', False), ('picking_type_code', '!=', 'outgoing'), ('state', '=', 'done')]}" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>
											  <button name="do_print_picking" string="Print" groups="stock.group_stock_user" type="object" attrs="{'invisible': [('state', 'not in', ('assigned', 'partially_available'))]}"/>
											  <button name="269" string="Print" attrs="{'invisible': [('state', '!=', 'done')]}" type="action" groups="base.group_user"/>
											  <button name="289" string="Return" attrs="{'invisible': [('state', '!=', 'done')]}" type="action" groups="base.group_user"/>
											  <button name="do_unreserve" string="Unreserve" groups="base.group_user" type="object" attrs="{'invisible': ['|', '|', '|', ('picking_type_code', '=', 'incoming'), ('immediate_transfer', '=', True), '&amp;', ('state', 'not in', ('assigned', 'partially_available')), ('move_type', '!=', 'one'), '&amp;', ('state', 'not in', ('assigned', 'partially_available', 'confirmed')), ('move_type', '=', 'one')]}"/>
											  <button name="button_scrap" type="object" string="Scrap" attrs="{'invisible': ['|', '&amp;', ('picking_type_code', '=', 'incoming'), ('state', '!=', 'done'), '&amp;', ('picking_type_code', '=', 'outgoing'), ('state', '=', 'done')]}"/>
											  <button name="action_toggle_is_locked" attrs="{'invisible': ['|', ('state', 'in', ('draft','cancel')), ('is_locked', '=', False)]}" string="Unlock" groups="stock.group_stock_manager" type="object" help="If the picking is unlocked you can edit initial demand (for a draft picking) or done quantities (for a done picking)."/>
											  <button name="action_toggle_is_locked" attrs="{'invisible': [('is_locked', '=', True)]}" string="Lock" groups="stock.group_stock_manager" type="object"/>
											  <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,assigned,done"/>
											  <button name="action_cancel" attrs="{'invisible': [('state', 'not in', ('assigned', 'confirmed', 'partially_available', 'draft', 'waiting'))]}" string="Cancel" groups="base.group_user" type="object"/>
										</header>
									</form>
								</field>	
							</div>
						</div>
					</page>
				</xpath>
				<xpath expr="//notebook" position="inside">
					<page name="report_technical" string="Informe Tecnico">
						<div class="col-row text-center">
							<div class="col h5">
								<span><b>INFORME TECNICO N°<field name="id" readonly="1"/>-2021-JASATEC/AST</b></span><br/>
								<span>Cliente: <field name="cliente_task" readonly="1"/><br/></span><br/>
								<span><field name="partner_type_vat"/>: <field name="partner_number_vat" readonly="1"/></span>
							</div>
						</div>
						<div class="row col">
							<span><br/><b><u>1. ANTECEDENTES</u></b><br/></span>
							<span> Por requerimiento de la empresa <field name="cliente_task"/> con <field name="partner_type_vat" readonly="1"/> - <field name="partner_number_vat" readonly="1"/> 
								se le remitió la Cotización N° <field name="sale_line_id" readonly="1"/>, de fecha <field name="sale_order_date" readonly="1"/> respecto al 
								<field name="nombre_titulo"/> ubicados en la ciudad de <field name="cliente_task" readonly="1"/>.<br/>Luego, nos indican que aceptan nuestra cotización y que se realizará el servicio en el 
								mes de __. De inmediato nuestra empresa realizó las coordinaciones con <field name="parent_res_contact"/>, <field name="parent_contact_function"/> de <field name="cliente_task" readonly="1"/> 
								y se programó el servicio técnico para el día <field name="fecha_inicio" readonly="1"/>.
							</span>
						</div>
						<div class="row col">
							<span><br/><b><u>2. DATOS DEL SERVICIO</u><br/>2.1. Fecha y Lugar:</b><br/></span>
							<div class="especial-indent">
								<span>El servicio de mantenimiento preventivo de <field name="nombre_titulo" readonly="1"/> se realizó los días <field name="fecha_inicio" readonly="1"/> al <field name="fecha_fin" readonly="1"/>
									,en las instalaciones de <field name="cliente_task" readonly="1"/>, ubicada en <field name="partner_street" readonly="1"/> en la ciudad de <field name="partner_city" readonly="1"/>,
									provincia de __, departamento de <field name="partner_province"/>.
								</span>
							</div>
						</div>
						<div class="row col">
							<span><br/><b>2.2. Personal tecnico:</b><br/>Para el presente servicio se asignó el personal técnico se detalla a continuación:<br/></span>
							<field name="timesheet_ids" readonly="1"/>
						</div>
						<div class="row col">
							<span><br/><b>2.3. Equipamiento:</b><br/>Los equipos a los que se realizó el servicio de mantenimiento preventivo son los que se indican a continuación:<br/></span>
							<field name="sale_line_product"/>
						</div>
						<div class="col row">
							<span><br/><b><u>3. DESARROLLO DEL SERVICIO</u></b><br/>Se realizaron las siguientes actividades:<br/></span>
						</div>
						<div class="col row">
							<field name="description" readonly="1"/>
						</div>
						<div class="row col">
							<span><br/><b><u>4. REGISTRO FOTOGRAFICO</u></b><br/></span>
						</div>
						<field name="foto_ids" widget="many2many_binary" string="Adjuntar Foto" nolabel="1"/>
						<div class="row col">
							<span><br/><b><u>5. CONCLUSIONES Y RECOMENDACIONES</u></b><br/></span>
							<field name="description_conclusion"/>
						</div>
						<group col="2">
					  		<group name="firma1">
						    		<div class="row-col text-center">
							    		<field name="employee_signature" widget="signature"/>
							    		<span><br/><b><field name="timesheets_employee_name"/></b><br/></span>
							    		<span><field name="timesheets_employee_function"/> - JASATEC<br/></span>
						    		</div>
						  	</group>
						  	<group name="firma2">
						    		<div class="row-col text-center">
							    		<field name="client_signature" widget="signature"/>
							    		<span><br/><b><field name="parent_res_contact"/></b><br/></span>
							    		<span><field name="parent_contact_function"/> - <field name="cliente_task" readonly="1"/><br/></span>
						    		</div>
						  	</group>
						</group>
					</page>
				</xpath>
			</data>
		</field>
        </record>
    </data>
</odoo>
