<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
	<record id="view_project_task_technical" model="ir.ui.view">
		<field name="name">project.task.technical</field>
		<field name="model">project.task</field>
		<field name="inherit_id" ref="project.view_task_form2"/>
		<field name="arch" type="xml">
			<data>
				<xpath expr="//page[@name='description_page']" position="attributes">
    					<attribute name="string">Desarrollo</attribute>
				</xpath>
				<xpath expr="//field[@name='sale_line_id']" position="after">
					<field name='state_payment_invoice' widget="badge" decoration-success="state_payment_invoice == 'paid'" decoration-info="state_payment_invoice == 'partial' or state_payment_invoice == 'in_payment'"/>
				</xpath>
				<xpath expr="//notebook" position="inside">
					<page name="herramientas_transfe" string="Herramientas">
						<field name="mov_herramienta" domain="[('partner_id','=',partner_id),('picking_type_id.code','=','internal'),('state','=','draft')]" context="{'tree_view_ref': 'stock.picking.project_task_herramientas_tree_editable_view'}">
							<tree editable="bottom" create="0" sample="1" modifiers="{}">
								<field name="name" decoration-bf="1"/>
								<field name="picking_type_id" optional="show"/>
								<field name="user_id" optional="hide" widget="many2one_avatar_user"/>
								<field name="partner_id" optional="show"/>
								<field name="company_id" groups="base.group_multi_company" optional="hide"/>
								<field name="location_id" options="{'no_create': True}" string="Desde" groups="stock.group_stock_multi_locations" optional="show"/>
								<field name="location_dest_id" options="{'no_create': True}" string="Para" groups="stock.group_stock_multi_locations" optional="show"/>
								<!--<button name="do_unreserve" type="object" string="Unreserve"/>-->
							</tree>
						</field>
					</page>
				</xpath>
				<xpath expr="//notebook" position="inside">
					<page name="report_technical" string="Informe Tecnico">
						<div class="col-row text-center">
							<div class="col h5">
								<span><b>INFORME TECNICO N°<field name="id" readonly="1"/>-2021-JASATEC/AST</b></span><br/>
								<span>Cliente: <field name="cliente_task" readonly="1"/><br/></span><br/>
								<span><field name="partner_type_vat"/>: <field name="partner_number_vat" readonly="1"/></span>
							</div>
						</div>
						<div class="row col">
							<span><br/><b><u>1. ANTECEDENTES</u></b><br/></span>
							<span> Por requerimiento de la empresa <field name="cliente_task"/> con <field name="partner_type_vat" readonly="1"/> - <field name="partner_number_vat" readonly="1"/> 
								se le remitió la Cotización N° <field name="sale_line_id" readonly="1"/>, de fecha <field name="sale_order_date" readonly="1"/> respecto al 
								<field name="nombre_titulo"/> ubicados en la ciudad de <field name="cliente_task" readonly="1"/>.<br/>Luego, nos indican que aceptan nuestra cotización y que se realizará el servicio en el 
								mes de __. De inmediato nuestra empresa realizó las coordinaciones con <field name="parent_res_contact"/>, <field name="parent_contact_function"/> de <field name="cliente_task" readonly="1"/> 
								y se programó el servicio técnico para el día <field name="fecha_inicio" readonly="1"/>.
							</span>
						</div>
						<div class="row col">
							<span><br/><b><u>2. DATOS DEL SERVICIO</u><br/>2.1. Fecha y Lugar:</b><br/></span>
							<div class="especial-indent">
								<span>El servicio de mantenimiento preventivo de <field name="nombre_titulo" readonly="1"/> se realizó los días <field name="fecha_inicio" readonly="1"/> al <field name="fecha_fin" readonly="1"/>
									,en las instalaciones de <field name="cliente_task" readonly="1"/>, ubicada en <field name="partner_street" readonly="1"/> en la ciudad de <field name="partner_city" readonly="1"/>,
									provincia de __, departamento de <field name="partner_province"/>.
								</span>
							</div>
						</div>
						<div class="row col">
							<span><br/><b>2.2. Personal tecnico:</b><br/>Para el presente servicio se asignó el personal técnico se detalla a continuación:<br/></span>
							<field name="timesheet_ids" readonly="1"/>
						</div>
						<div class="row col">
							<span><br/><b>2.3. Equipamiento:</b><br/>Los equipos a los que se realizó el servicio de mantenimiento preventivo son los que se indican a continuación:<br/></span>
							<field name="sale_line_product"/>
						</div>
						<div class="col row">
							<span><br/><b><u>3. DESARROLLO DEL SERVICIO</u></b><br/>Se realizaron las siguientes actividades:<br/></span>
						</div>
						<div class="col row">
							<field name="description" readonly="1"/>
						</div>
						<div class="row col">
							<span><br/><b><u>4. REGISTRO FOTOGRAFICO</u></b><br/></span>
						</div>
						<field name="foto_ids" widget="many2many_binary" string="Adjuntar Foto" nolabel="1"/>
						<div class="row col">
							<span><br/><b><u>5. CONCLUSIONES Y RECOMENDACIONES</u></b><br/></span>
							<field name="description_conclusion"/>
						</div>
						<group col="2">
					  		<group name="firma1">
						    		<div class="row-col text-center">
							    		<field name="employee_signature" widget="signature"/>
							    		<span><br/><b><field name="timesheets_employee_name"/></b><br/></span>
							    		<span><field name="timesheets_employee_function"/> - JASATEC<br/></span>
						    		</div>
						  	</group>
						  	<group name="firma2">
						    		<div class="row-col text-center">
							    		<field name="client_signature" widget="signature"/>
							    		<span><br/><b><field name="parent_res_contact"/></b><br/></span>
							    		<span><field name="parent_contact_function"/> - <field name="cliente_task" readonly="1"/><br/></span>
						    		</div>
						  	</group>
						</group>
					</page>
				</xpath>
			</data>
		</field>
        </record>
	<record model="ir.ui.view" id="project_task_herramienta_tree_view">
		<field name="name">stock.picking.project.task.herramienta.tree.view</field>
		<field name="model">stock.picking</field>
		<field name="mode">primary</field>
		<field name="priority" eval="10"/>
		<field name="inherit_id" ref="mstech.view_project_task_technical"/>
		<field name="arch" type="xml">
			<tree editable="bottom">
				<button_group name="button_group_0" modifiers="{}" editOnly="false" readOnly="false">
					<button name="do_unreserve" type="object" string="Unreserve" class="btn-success" options="{}" editOnly="false" readOnly="false"/>
				</button_group>
				<field name="show_json_popover" invisible="1" modifiers="{'readonly':true,'column_invisible':true}"/>
				<field name="json_popover" widget="mrp_workorder_popover" string=" " width="0.1" attrs="{'invisible': [('show_json_popover', '=', False)]}" modifiers="{'invisible':[['show_json_popover','=',false]],'readonly':true}"/>
			</tree>	
		</field>
	</record>
    </data>
</odoo>
